SET(Fada_INSTALL_PREFIX @CMAKE_INSTALL_PREFIX@)
SET(Fada_LIBRARY_DIR ${Fada_INSTALL_PREFIX}/lib${CMAKE_BUILD_TYPE})

INCLUDE(FadaLoadExternalLibraries)
INCLUDE(FadaOptions)
INCLUDE(FadaSummary)

set(CMAKE_MACOSX_RPATH 1)
set(CMAKE_INSTALL_RPATH ${Fada_LIBRARY_DIR})

message("Fada_EXTERNAL_LIBRARIES ${Fada_EXTERNAL_LIBRARIES}")
message("Fada_EXTERNAL_INCLUDE ${Fada_EXTERNAL_INCLUDE}")

INCLUDE_DIRECTORIES(${Fada_INSTALL_PREFIX}/include ${Fada_EXTERNAL_INCLUDE})
LINK_DIRECTORIES(${Fada_LIBRARY_DIR})


AUX_SOURCE_DIRECTORY(. SOURCES)
AUX_SOURCE_DIRECTORY(./Applications SOURCES)
AUX_SOURCE_DIRECTORY(./Integrators SOURCES)

SET(LINKLIBS  fadalib lapack blas ${Fada_EXTERNAL_LIBRARIES})

ADD_EXECUTABLE(${PROJECT_NAME} ${SOURCES})
TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${LINKLIBS})


INSTALL(TARGETS ${PROJECT_NAME}
DESTINATION .
PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE)
