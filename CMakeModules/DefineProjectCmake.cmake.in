SET(FadaPATH @CMAKE_INSTALL_PREFIX@)
SET(Fada_LIBRARY_DIR ${FadaPATH}/lib${CMAKE_BUILD_TYPE})

SET(Fada_INCLUDE_DIR ${FadaPATH}/include)
SET(Fada_INSTALLDIR ${FadaPATH})
INCLUDE(FadaLoadExternalLibraries)
INCLUDE(FadaOptions)
INCLUDE(FadaSummary)

#set(CMAKE_MACOSX_RPATH 1)
#set(CMAKE_INSTALL_RPATH ${Fada_LIBRARY_DIR})


INCLUDE_DIRECTORIES(${Fada_INCLUDE_DIR} ${ARMADILLO_INCLUDE_DIRS})
LINK_DIRECTORIES(${Fada_LIBRARY_DIR})


AUX_SOURCE_DIRECTORY(. SOURCES)
AUX_SOURCE_DIRECTORY(./Applications SOURCES)
AUX_SOURCE_DIRECTORY(./Integrators SOURCES)
SET(LINKLIBS ${LINKLIBS}  fadalib lapack blas ${HDF5_LIBRARIES}  ${METIS_LIBRARY} ${ARMADILLO_LIBRARIES} ${UMFPACK_LIBRARIES}  ${BLAS_LIBRARIES})
IF(BLAS_FOUND)
  LIST(APPEND LINKLIBS ${BLAS_LIBRARIES})
ENDIF(BLAS_FOUND)


#file(GLOB FadaLIBRARIES ${Fada_LIBRARY_DIR}/*.a)

ADD_EXECUTABLE(${PROJECT_NAME} ${SOURCES})
#set_property(TARGET ${PROJECT_NAME} PROPERTY LINK_DEPENDS ${FadaLIBRARIES})
TARGET_LINK_LIBRARIES(${PROJECT_NAME} ${LINKLIBS})


INSTALL(TARGETS ${PROJECT_NAME}
DESTINATION .
PERMISSIONS OWNER_READ OWNER_WRITE OWNER_EXECUTE GROUP_READ GROUP_EXECUTE WORLD_READ WORLD_EXECUTE)
